model Test {
    id         String      @id @default(uuid())
    date       DateTime
    comment    String?
    substances Substance[] @relation(name: "SubstanceToTest")

    recordId String
    record   Record @relation(fields: [recordId], references: [id], name: "TestToRecord")

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([id, recordId])
}

model Substance {
    id         String        @id @default(uuid())
    name       SubstanceName
    value Float
    min   Float
    max   Float

    testId String
    test   Test   @relation(fields: [testId], references: [id], name: "SubstanceToTest")

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([id, testId])
}

enum SubstanceName {   
    RED_BLOOD_CELLS
    WHITE_BLOOD_CELLS
    HEMOGLOBIN
    SODIUM
    POTASSIUM
}
